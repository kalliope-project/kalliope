
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.3">
    
    
      
        <title>mqtt_subscriber - Kalliope doc</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e35208c4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="pink">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#input-parameters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Kalliope doc" class="md-header__button md-logo" aria-label="Kalliope doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kalliope doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              mqtt_subscriber
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Kalliope doc" class="md-nav__button md-logo" aria-label="Kalliope doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Kalliope doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Installation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/raspbian/" class="md-nav__link">
        Raspberry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/debian/" class="md-nav__link">
        Debian
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/ubuntu/" class="md-nav__link">
        Ubuntu
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/upgrade/" class="md-nav__link">
        Upgrade
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/" class="md-nav__link">
        Getting-started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Settings
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Settings" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Settings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/settings/" class="md-nav__link">
        settings.yml
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        Trigger
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Trigger" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Trigger
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/triggers/snowboy/" class="md-nav__link">
        Snowboy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      <label class="md-nav__link" for="__nav_5_3">
        Player
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Player" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Player
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/players/mplayer/" class="md-nav__link">
        mplayer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/players/pyalsaaudio/" class="md-nav__link">
        pyalsaaudio
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/players/pyaudioplayer/" class="md-nav__link">
        pyaudioplayer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/players/sounddeviceplayer/" class="md-nav__link">
        sounddeviceplayer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      <label class="md-nav__link" for="__nav_5_4">
        STT
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="STT" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          STT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/stt/api.ai/" class="md-nav__link">
        api.ai
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/stt/bing/" class="md-nav__link">
        Bing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/stt/CMUSphinx/" class="md-nav__link">
        CMUSphinx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/stt/google/" class="md-nav__link">
        Google
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/stt/houndify/" class="md-nav__link">
        Houndify
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/stt/wit.ai/" class="md-nav__link">
        wit.ai
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      <label class="md-nav__link" for="__nav_5_5">
        TTS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="TTS" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          TTS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/tts/espeak/" class="md-nav__link">
        espeak
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/tts/googletts/" class="md-nav__link">
        googletts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/tts/marytts/" class="md-nav__link">
        marytts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/tts/pico2wave/" class="md-nav__link">
        pico2wave
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/tts/voicerss/" class="md-nav__link">
        voicerss
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../settings/tts/watson/" class="md-nav__link">
        watson
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        Brain
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Brain" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Brain
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/" class="md-nav__link">
        brain.yml
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" checked>
      
      <label class="md-nav__link" for="__nav_6_2">
        Core signals
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Core signals" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Core signals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../event/" class="md-nav__link">
        event
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../geolocation/" class="md-nav__link">
        geolocation
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          mqtt_subscriber
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        mqtt_subscriber
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#input-parameters" class="md-nav__link">
    Input parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#values-sent-to-the-synapse" class="md-nav__link">
    Values sent to the synapse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synapses-example" class="md-nav__link">
    Synapses example
  </a>
  
    <nav class="md-nav" aria-label="Synapses example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topic-with-plain-text-message" class="md-nav__link">
    Topic with plain text message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topic-with-json-message" class="md-nav__link">
    Topic with json message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-broker-require-authentication" class="md-nav__link">
    The broker require authentication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-with-rabbitmq-server-broker" class="md-nav__link">
    Test with rabbitmq-server broker
  </a>
  
    <nav class="md-nav" aria-label="Test with rabbitmq-server broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-rabbitmq" class="md-nav__link">
    Install rabbitmq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publish-message-from-cli" class="md-nav__link">
    Publish message from CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-tls-to-rabbitmq" class="md-nav__link">
    Add TLS to rabbitmq
  </a>
  
    <nav class="md-nav" aria-label="Add TLS to rabbitmq">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-root-ca" class="md-nav__link">
    Create root CA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-client-certificatekey-pair" class="md-nav__link">
    Create client certificate/key pair
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-rabbitmq-configuration" class="md-nav__link">
    Update rabbitmq configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../order/" class="md-nav__link">
        order
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      <label class="md-nav__link" for="__nav_6_3">
        Core neurons
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Core neurons" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Core neurons
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/ansible_playbook/" class="md-nav__link">
        ansible_playbook
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/brain/" class="md-nav__link">
        brain
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/debug/" class="md-nav__link">
        debug
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/kalliope_version/" class="md-nav__link">
        kalliope_version
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/kill_switch/" class="md-nav__link">
        kill_switch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/mqtt_publisher/" class="md-nav__link">
        mqtt_publisher
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/neurotimer/" class="md-nav__link">
        neurotimer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/neurotransmitter/" class="md-nav__link">
        neurotransmitter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/play/" class="md-nav__link">
        play
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/say/" class="md-nav__link">
        say
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/script/" class="md-nav__link">
        script
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/settings/" class="md-nav__link">
        settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/shell/" class="md-nav__link">
        shell
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/signals/" class="md-nav__link">
        signals
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/sleep/" class="md-nav__link">
        sleep
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/systemdate/" class="md-nav__link">
        systemdate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/uri/" class="md-nav__link">
        uri
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../neurons/volume/" class="md-nav__link">
        volume
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../community_modules/" class="md-nav__link">
        Community modules
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../cli/" class="md-nav__link">
        CLI
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../rest_api/" class="md-nav__link">
        Main
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/synapses/" class="md-nav__link">
        Synapses
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/neurons/" class="md-nav__link">
        Neurons
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/settings/" class="md-nav__link">
        Settings
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Contribute
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contribute" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Contribute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/core/" class="md-nav__link">
        Core
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/neuron/" class="md-nav__link">
        Neuron
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/stt/" class="md-nav__link">
        STT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/tts/" class="md-nav__link">
        TTS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/installation_file/" class="md-nav__link">
        install.yml
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/dna/" class="md-nav__link">
        dna.yml
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#input-parameters" class="md-nav__link">
    Input parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#values-sent-to-the-synapse" class="md-nav__link">
    Values sent to the synapse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synapses-example" class="md-nav__link">
    Synapses example
  </a>
  
    <nav class="md-nav" aria-label="Synapses example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topic-with-plain-text-message" class="md-nav__link">
    Topic with plain text message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topic-with-json-message" class="md-nav__link">
    Topic with json message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-broker-require-authentication" class="md-nav__link">
    The broker require authentication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-with-rabbitmq-server-broker" class="md-nav__link">
    Test with rabbitmq-server broker
  </a>
  
    <nav class="md-nav" aria-label="Test with rabbitmq-server broker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-rabbitmq" class="md-nav__link">
    Install rabbitmq
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publish-message-from-cli" class="md-nav__link">
    Publish message from CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-tls-to-rabbitmq" class="md-nav__link">
    Add TLS to rabbitmq
  </a>
  
    <nav class="md-nav" aria-label="Add TLS to rabbitmq">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-root-ca" class="md-nav__link">
    Create root CA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-client-certificatekey-pair" class="md-nav__link">
    Create client certificate/key pair
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-rabbitmq-configuration" class="md-nav__link">
    Update rabbitmq configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>mqtt_subscriber</h1>
                
                <p>Launch synapses when receiving a message on a topic from a MQTT messaging broker server.</p>
<blockquote>
<p>MQTT is a Client Server publish/subscribe messaging transport protocol.
It is mostly used in communication in Machine to Machine (M2M) and Internet of Things (IoT) contexts.
The main concept is that a client will publish a message attached to a "topic" to a server called a "broker", and other clients which are interested by the topic will subscribe to it.
The broker filters all incoming messages and distributes them accordingly.</p>
</blockquote>
<h2 id="input-parameters">Input parameters</h2>
<table>
<thead>
<tr>
<th>parameter</th>
<th>required</th>
<th>default</th>
<th>choices</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>broker_ip</td>
<td>YES</td>
<td></td>
<td></td>
<td>IP address of the MQTT broker server</td>
</tr>
<tr>
<td>topic</td>
<td>YES</td>
<td></td>
<td></td>
<td>topic name to subscribe</td>
</tr>
<tr>
<td>is_json</td>
<td>NO</td>
<td>FALSE</td>
<td>True, False</td>
<td>if true, all received message will be converted into a dict</td>
</tr>
<tr>
<td>broker_port</td>
<td>NO</td>
<td>1883</td>
<td></td>
<td>Port of the broker. By default 1883. 8883 when TLS is activated.</td>
</tr>
<tr>
<td>client_id</td>
<td>NO</td>
<td>kalliope</td>
<td></td>
<td>The client identifier is an identifier of each MQTT client and used by the broker server for identifying the client. Should be unique per broker</td>
</tr>
<tr>
<td>keepalive</td>
<td>NO</td>
<td>60</td>
<td></td>
<td>A time interval in seconds where the clients commits to by sending regular PING Request messages to the broker.</td>
</tr>
<tr>
<td>username</td>
<td>NO</td>
<td></td>
<td></td>
<td>username for authenticating the client</td>
</tr>
<tr>
<td>password</td>
<td>NO</td>
<td></td>
<td></td>
<td>password for authenticating the client</td>
</tr>
<tr>
<td>protocol</td>
<td>NO</td>
<td>MQTTv311</td>
<td>MQTTv31, MQTTv311</td>
<td>Can be either MQTTv31 or MQTTv311</td>
</tr>
<tr>
<td>ca_cert</td>
<td>NO</td>
<td></td>
<td></td>
<td>Path to the remote server CA certificate used for securing the transport</td>
</tr>
<tr>
<td>certfile</td>
<td>NO</td>
<td></td>
<td></td>
<td>Path to the client certificate file used for authentication</td>
</tr>
<tr>
<td>keyfile</td>
<td>NO</td>
<td></td>
<td></td>
<td>Path to the client key file attached to the client certificate</td>
</tr>
<tr>
<td>tls_insecure</td>
<td>NO</td>
<td>FALSE</td>
<td>True, False</td>
<td>Set the verification of the server hostname in the server certificate</td>
</tr>
</tbody>
</table>
<h2 id="values-sent-to-the-synapse">Values sent to the synapse</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
<th>sample</th>
</tr>
</thead>
<tbody>
<tr>
<td>mqtt_subscriber_message</td>
<td>message received from the broker</td>
<td>string/dict</td>
<td>"on", "off", {"temperature": "25", "humidity": "30"}</td>
</tr>
</tbody>
</table>
<h2 id="synapses-example">Synapses example</h2>
<h3 id="topic-with-plain-text-message">Topic with plain text message</h3>
<p>The topic send the status of a light. The received message would be "on" or off"</p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;test-mqtt-1&quot;</span>
  <span class="nt">signals</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mqtt_subscriber</span><span class="p">:</span>
        <span class="nt">broker_ip</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
        <span class="nt">topic</span><span class="p">:</span> <span class="s">&quot;topic1&quot;</span>
  <span class="nt">neurons</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">say</span><span class="p">:</span>
        <span class="nt">message</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&quot;The</span><span class="nv"> </span><span class="s">light</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">now</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">mqtt_subscriber_message</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>

<p>Kalliope output example:</p>
<div class="codehilite"><pre><span></span><code>The light is now on
</code></pre></div>

<h3 id="topic-with-json-message">Topic with json message</h3>
<p>In this example, the topic send a json payload that contain multiple information. E.g: <code>{"temperature": "25", "humidity": "30"}</code></p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;test-mqtt-2&quot;</span>
  <span class="nt">signals</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mqtt_subscriber</span><span class="p">:</span>
        <span class="nt">broker_ip</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
        <span class="nt">topic</span><span class="p">:</span> <span class="s">&quot;topic2&quot;</span>
        <span class="nt">is_json</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
  <span class="nt">neurons</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">say</span><span class="p">:</span>
        <span class="nt">message</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&quot;The</span><span class="nv"> </span><span class="s">temperature</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">now</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">mqtt_subscriber_message[&#39;temperature&#39;]</span><span class="nv"> </span><span class="s">}},</span><span class="nv"> </span><span class="s">humidity</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">mqtt_subscriber_message[&#39;humidity&#39;]</span><span class="nv"> </span><span class="s">percents</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>

<p>Kalliope output example:</p>
<div class="codehilite"><pre><span></span><code>The temperature is now 25 degrees, humidity 30%
</code></pre></div>

<h3 id="the-broker-require-authentication">The broker require authentication</h3>
<p>Password authentication</p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;test-mqtt-3&quot;</span>
  <span class="nt">signals</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mqtt_subscriber</span><span class="p">:</span>
        <span class="nt">broker_ip</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
        <span class="nt">topic</span><span class="p">:</span> <span class="s">&quot;topic</span><span class="nv"> </span><span class="s">3&quot;</span>
        <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;guest&quot;</span>
        <span class="nt">password</span><span class="p">:</span> <span class="s">&quot;guest&quot;</span>
  <span class="nt">neurons</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">say</span><span class="p">:</span>
        <span class="nt">message</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&quot;Message</span><span class="nv"> </span><span class="s">received</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">topic</span><span class="nv"> </span><span class="s">3&quot;</span>
</code></pre></div>

<p>It's better to use TLS when using password authentication for securing the transport</p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;test-mqtt-4&quot;</span>
  <span class="nt">signals</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mqtt_subscriber</span><span class="p">:</span>
        <span class="nt">broker_ip</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
        <span class="nt">broker_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8883</span>
        <span class="nt">topic</span><span class="p">:</span> <span class="s">&quot;topic</span><span class="nv"> </span><span class="s">4&quot;</span>
        <span class="nt">username</span><span class="p">:</span> <span class="s">&quot;guest&quot;</span>
        <span class="nt">password</span><span class="p">:</span> <span class="s">&quot;guest&quot;</span>
        <span class="nt">ca_cert</span><span class="p">:</span> <span class="s">&quot;/path/to/ca.cert&quot;</span>
        <span class="nt">tls_insecure</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
  <span class="nt">neurons</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">say</span><span class="p">:</span>
        <span class="nt">message</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&quot;Message</span><span class="nv"> </span><span class="s">received</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">topic</span><span class="nv"> </span><span class="s">3&quot;</span>
</code></pre></div>

<p>Authentication based on client certificate</p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;test-mqtt-5&quot;</span>
  <span class="nt">signals</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mqtt_subscriber</span><span class="p">:</span>
        <span class="nt">broker_ip</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
        <span class="nt">broker_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8883</span>
        <span class="nt">topic</span><span class="p">:</span> <span class="s">&quot;topic</span><span class="nv"> </span><span class="s">5&quot;</span>
        <span class="nt">ca_cert</span><span class="p">:</span> <span class="s">&quot;/path/to/ca.cert&quot;</span>
        <span class="nt">tls_insecure</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
        <span class="nt">certfile</span><span class="p">:</span> <span class="s">&quot;/path/to/client.crt&quot;</span>
        <span class="nt">keyfile</span><span class="p">:</span> <span class="s">&quot;/path/to/client.key&quot;</span>
  <span class="nt">neurons</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">say</span><span class="p">:</span>
        <span class="nt">message</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&quot;Message</span><span class="nv"> </span><span class="s">received</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">topic</span><span class="nv"> </span><span class="s">5&quot;</span>
</code></pre></div>

<h2 id="notes">Notes</h2>
<p>When you want to use the same broker within your multiple synapses in your brain, you must keep in mind that the configuration must be the same
It means that you cannot declare a synapse that use a broker ip with TLS activated, and another synapse that use the same broker ip but without TLS activated.
When you declare a "broker_ip", a unique object is created once, then topic are added following all synapses</p>
<p>On the other hand, you can subscribe to multiple topic that use json or not within the same broker ip.</p>
<div class="codehilite"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;synapse-mqtt-1&quot;</span>
  <span class="nt">signals</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mqtt_subscriber</span><span class="p">:</span>
        <span class="nt">broker_ip</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
        <span class="nt">topic</span><span class="p">:</span> <span class="s">&quot;topic1&quot;</span>
        <span class="nt">is_json</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
  <span class="nt">neurons</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">say</span><span class="p">:</span>
        <span class="nt">message</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&quot;I&#39;m</span><span class="nv"> </span><span class="s">started</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">topic</span><span class="nv"> </span><span class="s">1&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;synapse-mqtt-2&quot;</span>
  <span class="nt">signals</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">mqtt_subscriber</span><span class="p">:</span>
        <span class="nt">broker_ip</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
        <span class="nt">topic</span><span class="p">:</span> <span class="s">&quot;topic2&quot;</span>
        <span class="nt">is_json</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
  <span class="nt">neurons</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">say</span><span class="p">:</span>
        <span class="nt">message</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&quot;I&#39;m</span><span class="nv"> </span><span class="s">started</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">topic</span><span class="nv"> </span><span class="s">2&quot;</span>
</code></pre></div>

<h2 id="test-with-rabbitmq-server-broker">Test with rabbitmq-server broker</h2>
<p>This part can help you to configure your brain by sending message to a local broker</p>
<h3 id="install-rabbitmq">Install rabbitmq</h3>
<div class="codehilite"><pre><span></span><code>sudo apt-get install rabbitmq-server mosquitto-clients
</code></pre></div>

<p>Enable mqtt plugin</p>
<div class="codehilite"><pre><span></span><code>sudo rabbitmq-plugins enable rabbitmq_mqtt
sudo systemctl restart rabbitmq-server
</code></pre></div>

<p>Active web ui (optional)</p>
<div class="codehilite"><pre><span></span><code>sudo rabbitmq-plugins <span class="nb">enable</span> rabbitmq_management
</code></pre></div>

<p>Get the cli and make it available to use</p>
<div class="codehilite"><pre><span></span><code>wget http://127.0.0.1:15672/cli/rabbitmqadmin
sudo mv rabbitmqadmin /etc/rabbitmqadmin
sudo chmod 755 /etc/rabbitmqadmin
</code></pre></div>

<p>Create admin account (when UI installed)</p>
<div class="codehilite"><pre><span></span><code>sudo rabbitmqctl add_user admin p@ssw0rd
sudo rabbitmqctl set_user_tags admin administrator
sudo rabbitmqctl set_permissions -p / admin <span class="s2">&quot;.*&quot;</span> <span class="s2">&quot;.*&quot;</span> <span class="s2">&quot;.*&quot;</span>
</code></pre></div>

<h3 id="publish-message-from-cli">Publish message from CLI</h3>
<p>Publish a plain text message</p>
<div class="codehilite"><pre><span></span><code>mosquitto_pub -t &#39;my_topic&#39; -m &#39;message&#39;
</code></pre></div>

<p>Test publish a json message</p>
<div class="codehilite"><pre><span></span><code>mosquitto_pub -t &#39;my_topic&#39; -m &#39;{&quot;test&quot; : &quot;message&quot;}&#39;
</code></pre></div>

<h3 id="add-tls-to-rabbitmq">Add TLS to rabbitmq</h3>
<h4 id="create-root-ca">Create root CA</h4>
<p>Install openssl</p>
<div class="codehilite"><pre><span></span><code>apt-get install openssl
</code></pre></div>

<p>Create PKI structure</p>
<div class="codehilite"><pre><span></span><code>mkdir testca
<span class="nb">cd</span> testca
<span class="nb">echo</span> <span class="m">01</span> &gt; serial
</code></pre></div>

<p>Create private key and CA certificate</p>
<div class="codehilite"><pre><span></span><code>openssl req -out ca.key -new -x509
</code></pre></div>

<p>Generate server/key pair</p>
<div class="codehilite"><pre><span></span><code>openssl genrsa -out server.key <span class="m">2048</span>
openssl req -key server.key -new -out server.req
openssl x509 -req -in server.req -CA ca.crt -CAkey privkey.pem -CAserial serial -out server.crt
</code></pre></div>

<h4 id="create-client-certificatekey-pair">Create client certificate/key pair</h4>
<p>Create private key</p>
<div class="codehilite"><pre><span></span><code>openssl genrsa -out client.key <span class="m">2048</span>
</code></pre></div>

<p>Create a certificate request</p>
<div class="codehilite"><pre><span></span><code>openssl req -key client.key -new -out client.req
</code></pre></div>

<p>Sign the client request with the CA</p>
<div class="codehilite"><pre><span></span><code>openssl x509 -req -in client.req -CA ca.cert -CAkey privkey.pem -CAserial serial -out client.crt
</code></pre></div>

<h4 id="update-rabbitmq-configuration">Update rabbitmq configuration</h4>
<p>Edit (or create if the file is not present) a config file <code>/etc/rabbitmq/rabbitmq.config</code></p>
<div class="codehilite"><pre><span></span><code>[
  {rabbit, [
     {ssl_listeners, [5671]},
     {ssl_options, [{cacertfile,&quot;/path/to/ca.cert&quot;},
                    {certfile,&quot;/path/to/server.crt&quot;},
                    {keyfile,&quot;/path/to/server.key&quot;},
                    {verify,verify_peer},
                    {fail_if_no_peer_cert,false}]}
   ]},
  {rabbitmq_mqtt, [
                  {ssl_listeners,    [8883]},
                  {tcp_listeners,    [1883]}
                ]}

].
</code></pre></div>

<p>Restart rabbitmq server to take care of changes</p>
<div class="codehilite"><pre><span></span><code>sudo systemctl restart rabbitmq-server
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../geolocation/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              geolocation
            </div>
          </div>
        </a>
      
      
        <a href="../order/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              order
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>