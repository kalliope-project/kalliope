language: python
python:
  - "2.7"
# command to install dependencies
before_install:
- sudo add-apt-repository "deb http://archive.ubuntu.com/ubuntu trusty main restricted universe multiverse"
- sudo add-apt-repository "deb http://archive.ubuntu.com/ubuntu trusty-updates main restricted universe multiverse"
- sudo add-apt-repository "deb http://archive.ubuntu.com/ubuntu trusty-backports main restricted universe multiverse"
- sudo apt-get update
- sudo apt-get install $(cat install/files/deb-packages_requirements.txt)
- sudo apt-get install libstdc++6
install: "pip install -r install/files/python_requirements.txt"
# command to run tests
script:
  - pytest
  - # python3
  - sudo apt-get install python3-dev python3-yaml python3-markupsafe python3-setuptools
  - git clone https://github.com/charlierguo/gmail.git && pushd gmail && wget -c https://github.com/charlierguo/gmail/pull/48.patch && patch -p1 -i 48.patch && python3 setup.py install --user && popd
  - python3 setup.py install --user
  - pip3 install pytest --user
  - ~/.local/bin/pytest

# CodeCLimate for test coveragek
addons:
    code_climate:
        repo_token: 8d4355b7655d8a91daa72132c587a03cee644e78dfcdd86562551b4ea992b61e
