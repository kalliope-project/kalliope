
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.3">
    
    
      
        <title>Create a Raspbian image with already installed Kalliope - Kalliope doc</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e35208c4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="pink">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-a-raspbian-image-with-already-installed-kalliope" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Kalliope doc" class="md-header__button md-logo" aria-label="Kalliope doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kalliope doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Create a Raspbian image with already installed Kalliope
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Kalliope doc" class="md-nav__button md-logo" aria-label="Kalliope doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Kalliope doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Installation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../raspbian/" class="md-nav__link">
        Raspberry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../debian/" class="md-nav__link">
        Debian
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ubuntu/" class="md-nav__link">
        Ubuntu
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/" class="md-nav__link">
        Upgrade
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        Getting-started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Settings
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Settings" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Settings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/settings/" class="md-nav__link">
        settings.yml
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        Trigger
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Trigger" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Trigger
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/triggers/snowboy/" class="md-nav__link">
        Snowboy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      <label class="md-nav__link" for="__nav_5_3">
        Player
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Player" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Player
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/players/mplayer/" class="md-nav__link">
        mplayer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/players/pyalsaaudio/" class="md-nav__link">
        pyalsaaudio
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/players/pyaudioplayer/" class="md-nav__link">
        pyaudioplayer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/players/sounddeviceplayer/" class="md-nav__link">
        sounddeviceplayer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      <label class="md-nav__link" for="__nav_5_4">
        STT
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="STT" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          STT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stt/api.ai/" class="md-nav__link">
        api.ai
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stt/bing/" class="md-nav__link">
        Bing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stt/CMUSphinx/" class="md-nav__link">
        CMUSphinx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stt/google/" class="md-nav__link">
        Google
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stt/houndify/" class="md-nav__link">
        Houndify
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stt/wit.ai/" class="md-nav__link">
        wit.ai
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      <label class="md-nav__link" for="__nav_5_5">
        TTS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="TTS" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          TTS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/tts/espeak/" class="md-nav__link">
        espeak
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/tts/googletts/" class="md-nav__link">
        googletts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/tts/marytts/" class="md-nav__link">
        marytts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/tts/pico2wave/" class="md-nav__link">
        pico2wave
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/tts/voicerss/" class="md-nav__link">
        voicerss
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/tts/watson/" class="md-nav__link">
        watson
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Brain
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Brain" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Brain
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/brain/" class="md-nav__link">
        brain.yml
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      <label class="md-nav__link" for="__nav_6_2">
        Core signals
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Core signals" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Core signals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/signals/event/" class="md-nav__link">
        event
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/signals/geolocation/" class="md-nav__link">
        geolocation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/signals/mqtt_subscriber/" class="md-nav__link">
        mqtt_subscriber
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/signals/order/" class="md-nav__link">
        order
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      <label class="md-nav__link" for="__nav_6_3">
        Core neurons
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Core neurons" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Core neurons
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/ansible_playbook/" class="md-nav__link">
        ansible_playbook
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/brain/" class="md-nav__link">
        brain
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/debug/" class="md-nav__link">
        debug
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/kalliope_version/" class="md-nav__link">
        kalliope_version
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/kill_switch/" class="md-nav__link">
        kill_switch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/mqtt_publisher/" class="md-nav__link">
        mqtt_publisher
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/neurotimer/" class="md-nav__link">
        neurotimer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/neurotransmitter/" class="md-nav__link">
        neurotransmitter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/play/" class="md-nav__link">
        play
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/say/" class="md-nav__link">
        say
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/script/" class="md-nav__link">
        script
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/settings/" class="md-nav__link">
        settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/shell/" class="md-nav__link">
        shell
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/signals/" class="md-nav__link">
        signals
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/sleep/" class="md-nav__link">
        sleep
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/systemdate/" class="md-nav__link">
        systemdate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/uri/" class="md-nav__link">
        uri
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/neurons/volume/" class="md-nav__link">
        volume
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../brain/community_modules/" class="md-nav__link">
        Community modules
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../rest_api/" class="md-nav__link">
        Main
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/synapses/" class="md-nav__link">
        Synapses
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/neurons/" class="md-nav__link">
        Neurons
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/settings/" class="md-nav__link">
        Settings
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Contribute
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Contribute" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Contribute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/core/" class="md-nav__link">
        Core
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/neuron/" class="md-nav__link">
        Neuron
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/stt/" class="md-nav__link">
        STT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/tts/" class="md-nav__link">
        TTS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/installation_file/" class="md-nav__link">
        install.yml
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/dna/" class="md-nav__link">
        dna.yml
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prepare-the-image" class="md-nav__link">
    Prepare the image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-image" class="md-nav__link">
    Create the image
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="create-a-raspbian-image-with-already-installed-kalliope">Create a Raspbian image with already installed Kalliope</h1>
<p>This documentation aims at explaining how to creta a Raspbian image with pre installed Kalliope.</p>
<p>Install a fresh <a href="http://downloads.raspberrypi.org/raspbian/images/">image of Raspbian</a> as usual on your raspberry Pi.
Once deployed, follow manual steps bellow.</p>
<blockquote>
<p><strong>Note:</strong> From here I suppose that the Rpi has received a valid IP from your LAN DHCP server and can access to the internet.</p>
</blockquote>
<h2 id="prepare-the-image">Prepare the image</h2>
<p>Login to your Rpi.</p>
<p>Enable SSH</p>
<div class="codehilite"><pre><span></span><code>sudo systemctl <span class="nb">enable</span> ssh
sudo systemctl start ssh
</code></pre></div>

<p>You now have a SSH connection, you can connect remotely to your Pi to perform next steps from a console.</p>
<blockquote>
<p><strong>Note:</strong> The SSH server is listening on the default SSH port with the default Rasbpian credentials. This can be a security issue.
It is recommended  to check that the Rpi is not directly accessible from the internet.</p>
</blockquote>
<p>Install Kalliope from the script</p>
<div class="codehilite"><pre><span></span><code>curl -s https://raw.githubusercontent.com/kalliope-project/kalliope/master/install/rpi_install_kalliope.sh <span class="p">|</span> bash
</code></pre></div>

<p>If you want to install a particular branch you can specify it with an argument following the syntax bellow</p>
<div class="codehilite"><pre><span></span><code>curl -s https://raw.githubusercontent.com/kalliope-project/kalliope/master/install/rpi_install_kalliope.sh | bash -s &lt;branch_name&gt;
</code></pre></div>

<p>E.g</p>
<div class="codehilite"><pre><span></span><code>curl -s https://raw.githubusercontent.com/kalliope-project/kalliope/master/install/rpi_install_kalliope.sh <span class="p">|</span> bash -s dev
</code></pre></div>

<p>Check Kalliope is installed</p>
<div class="codehilite"><pre><span></span><code>kalliope --version
</code></pre></div>

<p>Cleanup installation files</p>
<div class="codehilite"><pre><span></span><code>rm -rf get-pip.py
sudo rm -rf kalliope
</code></pre></div>

<p>Clone some starter kit</p>
<div class="codehilite"><pre><span></span><code>git clone https://github.com/kalliope-project/kalliope_starter_fr.git
git clone https://github.com/kalliope-project/kalliope_starter_en.git
git clone https://github.com/kalliope-project/kalliope_starter_de.git
</code></pre></div>

<p>Change the hostname</p>
<div class="codehilite"><pre><span></span><code>sudo hostnamectl set-hostname kalliope
sudo sed -i <span class="s1">&#39;s/raspberrypi/kalliope/g&#39;</span> /etc/hosts
</code></pre></div>

<p>Clear the command line history</p>
<div class="codehilite"><pre><span></span><code><span class="nb">history</span> -c
</code></pre></div>

<p>Shutdown the Rpi</p>
<div class="codehilite"><pre><span></span><code>sudo shutdown -h now
</code></pre></div>

<h2 id="create-the-image">Create the image</h2>
<p>Next commands have been tested on Ubuntu 16.04.</p>
<p>In the next part we create an image an shrink it in order to take less storage space.</p>
<blockquote>
<p><strong>Note:</strong> Raspbian operating system comes with a tool to resize the filesystem to the largest size the SD card will support (sudo raspi-config, then select Expend Filesystem). You wont lose space by shrinking the image because you can expand it back again.</p>
<p><strong>Note:</strong> Be sure of what you doing in next steps. Writing disk image on the wrong disk will destroy all your computer data. </p>
</blockquote>
<p>Remove the SD card from your Rpi and connect it into a Linux distrib via an external USB card reader.</p>
<p>Check where the card is mounted</p>
<div class="codehilite"><pre><span></span><code>df -h
</code></pre></div>

<p>The output should looks like this</p>
<div class="codehilite"><pre><span></span><code>df -h
Filesystem      Size  Used Avail Use% Mounted on
--- TRUNCKATED ---
/dev/sdb2        15G  <span class="m">1</span>.3G   13G  <span class="m">10</span>% /media/nico/f2100b2f-ed84-4647-b5ae-089280112716
/dev/sdb1        41M   21M   21M  <span class="m">51</span>% /media/nico/boot
</code></pre></div>

<p>The SD card is on <strong>/dev/sdb device</strong>. It has two partition, <strong>/dev/sdb1</strong> and <strong>/dev/sdb2</strong>.</p>
<blockquote>
<p><strong>Note:</strong> Your system might mount the card somewhere else depending on the number of disk you already have like /dev/sdc or /dev/sde. 
Note down the path where your SD is.</p>
</blockquote>
<p>Unmount the two partitions. Keep the SD card in the reader and connected to the system.</p>
<div class="codehilite"><pre><span></span><code>sudo umount /dev/sdb1 /dev/sdb2
</code></pre></div>

<p>Make the image with <strong>dcfldd</strong>. This program is a replacement for the old dd disk utility program that show the progression of a copy.</p>
<p>Install the tool</p>
<div class="codehilite"><pre><span></span><code>sudo apt-get install dcfldd
</code></pre></div>

<p>Create the image following this syntax.</p>
<div class="codehilite"><pre><span></span><code><span class="nv">sudo</span> <span class="nv">dcfldd</span> <span class="k">if</span><span class="o">=&lt;</span><span class="nv">my_sd_card_disk_path</span><span class="o">&gt;</span> <span class="nv">of</span><span class="o">=&lt;</span><span class="nv">target_path</span><span class="o">&gt;/</span><span class="nv">kalliope</span>.<span class="nv">img</span>
</code></pre></div>

<p>E.g</p>
<div class="codehilite"><pre><span></span><code>sudo dcfldd <span class="k">if</span><span class="o">=</span>/dev/sdb <span class="nv">of</span><span class="o">=</span>kalliope.img
</code></pre></div>

<blockquote>
<p><strong>Note:</strong> Be sure you have enough space available in the target path</p>
</blockquote>
<p>It will take a couple minutes to create the image depending of the size of your SD card.</p>
<p>Once it's done, give the ownership back to your current user. (the image belong to root as we created it with sudo)</p>
<div class="codehilite"><pre><span></span><code>sudo chown <span class="si">${</span><span class="nv">USER</span><span class="si">}</span>:<span class="si">${</span><span class="nv">USER</span><span class="si">}</span> kalliope.img
</code></pre></div>

<p>Now we have a file that can already be used to instantiate a Rpi. But the file is big as the SD card itself.
To reduce the size of the image we need <code>gparted</code>. Install it</p>
<div class="codehilite"><pre><span></span><code>sudo apt-get install gparted
</code></pre></div>

<p>Gparted is only able to edit physical device, so we need to create a virtual device from the image before using it.
As we saw when we have identified our disk, Raspbian has two partitions. The fist one, boot, is already tiny and does not need to be shrank.
The second partition is where everything is stored. It contains a lot of free space.</p>
<p>Show partition info from the image</p>
<div class="codehilite"><pre><span></span><code>sudo fdisk -l kalliope.img
</code></pre></div>

<p>The output should looks like this</p>
<div class="codehilite"><pre><span></span><code><span class="nv">Device</span>        <span class="nv">Boot</span> <span class="nv">Start</span>      <span class="k">End</span>  <span class="nv">Sectors</span>  <span class="nv">Size</span> <span class="nv">Id</span> <span class="nv">Type</span>
<span class="nv">kalliope</span>.<span class="nv">img1</span>       <span class="mi">8192</span>    <span class="mi">92159</span>    <span class="mi">83968</span>   <span class="mi">41</span><span class="nv">M</span>  <span class="nv">c</span> <span class="nv">W95</span> <span class="nv">FAT32</span> <span class="ss">(</span><span class="nv">LBA</span><span class="ss">)</span>
<span class="nv">kalliope</span>.<span class="nv">img2</span>      <span class="mi">92160</span> <span class="mi">31116287</span> <span class="mi">31024128</span> <span class="mi">14</span>.<span class="mi">8</span><span class="nv">G</span> <span class="mi">83</span> <span class="nv">Linux</span>
</code></pre></div>

<p>Export the START sector of the second partition. The variable will be used in next commands.</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span> <span class="nv">START</span><span class="o">=</span><span class="m">92160</span>
</code></pre></div>

<p>Check the env variable is set correctly</p>
<div class="codehilite"><pre><span></span><code><span class="nb">echo</span> <span class="si">${</span><span class="nv">START</span><span class="si">}</span>
</code></pre></div>

<p>Create the virtual drive with only the second patition</p>
<div class="codehilite"><pre><span></span><code>sudo losetup /dev/loop0 kalliope.img -o <span class="k">$((</span>START*512<span class="k">))</span>
</code></pre></div>

<p>Now read the loopback device with gparted</p>
<div class="codehilite"><pre><span></span><code>sudo gparted /dev/loop0
</code></pre></div>

<p>Gparted will show you the state of the partition. Click the <code>/dev/loop0</code> partition and select <strong>Resize/Move</strong> from the menu.
change the value of "New Size" so that it is slighty abose the "Minimum Size". 
Note down the new size! In this example the new size is <strong>2000 MB</strong>.
Then apply the resizing and exit gparted.</p>
<p>Remove the loopback device and create a new one with the whole image this time.</p>
<div class="codehilite"><pre><span></span><code>sudo losetup -d /dev/loop0
sudo losetup /dev/loop0 kalliope.img
</code></pre></div>

<p>Now, we use <strong>fdisk</strong> to edit the partition table in order to resize it to the new size.</p>
<div class="codehilite"><pre><span></span><code>sudo fdisk /dev/loop0
</code></pre></div>

<p>You should now see the <strong>fdisk</strong> prompt.
- Enter <strong>d 2</strong> to delete the table entry for the second partition
- Enter n p 2 to create a new second partition entry
- Enter the START sector number that you used earlier.
- Enter <code>+NEWSIZE</code> as the new size. Don't forget the "+" at the start. For example <code>+2000M</code>
- Enter w to write the new partition</p>
<p>Output example</p>
<div class="codehilite"><pre><span></span><code><span class="nv">Command</span> <span class="ss">(</span><span class="nv">m</span> <span class="k">for</span> <span class="nv">help</span><span class="ss">)</span>: <span class="nv">d</span>
<span class="nv">Partition</span> <span class="nv">number</span> <span class="ss">(</span><span class="mi">1</span>,<span class="mi">2</span>, <span class="nv">default</span> <span class="mi">2</span><span class="ss">)</span>: <span class="mi">2</span>

<span class="nv">Partition</span> <span class="mi">2</span> <span class="nv">has</span> <span class="nv">been</span> <span class="nv">deleted</span>.

<span class="nv">Command</span> <span class="ss">(</span><span class="nv">m</span> <span class="k">for</span> <span class="nv">help</span><span class="ss">)</span>: <span class="nv">n</span>
<span class="nv">Partition</span> <span class="nv">type</span>
   <span class="nv">p</span>   <span class="nv">primary</span> <span class="ss">(</span><span class="mi">1</span> <span class="nv">primary</span>, <span class="mi">0</span> <span class="nv">extended</span>, <span class="mi">3</span> <span class="nv">free</span><span class="ss">)</span>
   <span class="nv">e</span>   <span class="nv">extended</span> <span class="ss">(</span><span class="nv">container</span> <span class="k">for</span> <span class="nv">logical</span> <span class="nv">partitions</span><span class="ss">)</span>
<span class="nv">Select</span> <span class="ss">(</span><span class="nv">default</span> <span class="nv">p</span><span class="ss">)</span>: <span class="nv">p</span>
<span class="nv">Partition</span> <span class="nv">number</span> <span class="ss">(</span><span class="mi">2</span><span class="o">-</span><span class="mi">4</span>, <span class="nv">default</span> <span class="mi">2</span><span class="ss">)</span>: <span class="mi">2</span>
<span class="nv">First</span> <span class="nv">sector</span> <span class="ss">(</span><span class="mi">2048</span><span class="o">-</span><span class="mi">31116287</span>, <span class="nv">default</span> <span class="mi">2048</span><span class="ss">)</span>: <span class="mi">92160</span>
<span class="nv">Last</span> <span class="nv">sector</span>, <span class="o">+</span><span class="nv">sectors</span> <span class="nv">or</span> <span class="o">+</span><span class="nv">size</span>{<span class="nv">K</span>,<span class="nv">M</span>,<span class="nv">G</span>,<span class="nv">T</span>,<span class="nv">P</span>} <span class="ss">(</span><span class="mi">92160</span><span class="o">-</span><span class="mi">31116287</span>, <span class="nv">default</span> <span class="mi">31116287</span><span class="ss">)</span>: <span class="o">+</span><span class="mi">2000</span><span class="nv">M</span>

<span class="nv">Created</span> <span class="nv">a</span> <span class="nv">new</span> <span class="nv">partition</span> <span class="mi">2</span> <span class="nv">of</span> <span class="nv">type</span> <span class="s1">&#39;</span><span class="s">Linux</span><span class="s1">&#39;</span> <span class="nv">and</span> <span class="nv">of</span> <span class="nv">size</span> <span class="mi">2</span> <span class="nv">GiB</span>.

<span class="nv">Command</span> <span class="ss">(</span><span class="nv">m</span> <span class="k">for</span> <span class="nv">help</span><span class="ss">)</span>: <span class="nv">w</span>
<span class="nv">The</span> <span class="nv">partition</span> <span class="nv">table</span> <span class="nv">has</span> <span class="nv">been</span> <span class="nv">altered</span>.
<span class="nv">Calling</span> <span class="nv">ioctl</span><span class="ss">()</span> <span class="nv">to</span> <span class="nv">re</span><span class="o">-</span><span class="nv">read</span> <span class="nv">partition</span> <span class="nv">table</span>.
</code></pre></div>

<p>Let's take a look to the partition table again</p>
<div class="codehilite"><pre><span></span><code><span class="nv">sudo</span> <span class="nv">fdisk</span> <span class="o">-</span><span class="nv">l</span> <span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">loop0</span>

<span class="nv">Device</span>       <span class="nv">Boot</span> <span class="nv">Start</span>     <span class="k">End</span> <span class="nv">Sectors</span> <span class="nv">Size</span> <span class="nv">Id</span> <span class="nv">Type</span>
<span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">loop0p1</span>       <span class="mi">8192</span>   <span class="mi">92159</span>   <span class="mi">83968</span>  <span class="mi">41</span><span class="nv">M</span>  <span class="nv">c</span> <span class="nv">W95</span> <span class="nv">FAT32</span> <span class="ss">(</span><span class="nv">LBA</span><span class="ss">)</span>
<span class="o">/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">loop0p2</span>      <span class="mi">92160</span> <span class="mi">4188159</span> <span class="mi">4096000</span>   <span class="mi">2</span><span class="nv">G</span> <span class="mi">83</span> <span class="nv">Linux</span>
</code></pre></div>

<p>Note down the ED sector of the second partition</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span> <span class="nv">END</span><span class="o">=</span><span class="m">4188159</span>
</code></pre></div>

<p>Destroy the loopback</p>
<div class="codehilite"><pre><span></span><code>sudo losetup -d /dev/loop0
</code></pre></div>

<p>Now, trim the file to the new length.</p>
<div class="codehilite"><pre><span></span><code><span class="n">truncate</span> <span class="o">-</span><span class="n">s</span> <span class="o">$</span><span class="p">(((</span><span class="kr">END</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">512</span><span class="p">))</span> <span class="n">kalliope</span><span class="p">.</span><span class="n">img</span>
</code></pre></div>

<p>Check the new size of the image</p>
<div class="codehilite"><pre><span></span><code>du -hs kalliope.img 
<span class="m">2</span>.0G    kalliope.img
</code></pre></div>

<p>You can now compress it to reduce a little more the size</p>
<div class="codehilite"><pre><span></span><code>zip kalliope.img.zip kalliope.img
</code></pre></div>

<p>Final size</p>
<div class="codehilite"><pre><span></span><code>du -hs kalliope.img.zip 
727M    kalliope.img.zip
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>